# Agent 编排与提示词策略（MVP）

## 1. 目标

- 让 Agent 产出“可落地”的结构化结果
- 可追溯到书籍原文证据
- 降低幻觉：不确定就说不确定

## 2. Agent 划分（建议）

- Knowledge Builder Agent：构建知识体系（KP/层级/关联/证据）
- Content Agent：生成学习内容（summary + levels）
- Exercise Agent：出题 + 评阅反馈

MVP 也可先实现为单 Agent + 不同 prompt 模板。

## 3. 输出约束（强建议）

- 统一使用 JSON 输出（配合 schema_version）
- 每个 KP/题目包含 `evidence_snippet_ids` 或直接包含简短引用

## 4. Prompt 原则

- 明确输入边界：只基于提供的片段与上下文
- 明确输出格式：字段名、类型、长度上限
- 明确质量要求：
  - KP 必须可学习、可测
  - summary 必须包含误区
  - 题目必须有可解释的答案

## 5. 可靠性策略

- 两阶段生成：
  1) 先抽取（extract）
  2) 再改写/总结（compose）
- 自检（可选）：Agent 对输出做校验：
  - 是否每个 KP 都有证据
  - 是否存在空字段/重复

## 6. 相关文档

- [00-总体设计.md](00-总体设计.md)
- [01-文档扫描与知识体系构建.md](01-文档扫描与知识体系构建.md)
- [03-学习内容生成（精要速览-原文对照-层次化展开）.md](03-学习内容生成（精要速览-原文对照-层次化展开）.md)
- [04-习题生成与练习反馈.md](04-习题生成与练习反馈.md)
- [05-数据模型与存储策略（MVP）.md](05-数据模型与存储策略（MVP）.md)

