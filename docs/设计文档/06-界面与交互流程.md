# 界面与交互流程

## 1. 整体布局 (App Shell)

```text
┌───┬──────────────────────────────────────────────────────────┐
│   │ Top Bar: [Breadcrumb] [Global Search] [User Avatar]      │
│ S ├─────────────────────────┬────────────────────────────────┤
│ i │ Left Panel: Knowledge   │ Main Area: Slide Viewer      │
│ d │ Tree                    │ [Audio Toggle]               │
│ e │ [Search Tree...]        │                              │
│ B │                         │      +----------------+      │
│ a │ ▾ Chapter 1             │      |  Slide Card    |      │
│ r │   ○ Concept A           │      |                |      │
│   │   ● Concept B           │      |                |      │
│   │                         │      +----------------+      │
│   │                         │                              │
│   │                         │    [< Prev]   [Next >]       │
│   │                         │                              │
└───┴─────────────────────────┴────────────────────────────────┘
```

**Sidebar (Global Nav)**:
- **Library**: 切换书籍/项目。
- **Dashboard**: 总体概览。
- **Mistakes**: 错题本入口。
- **Settings**: 配置 LLM、API Key、TTS 设置等。

## 2. 核心视图

### 2.1 书籍库 (Library View)
- 卡片式展示已导入的书籍。
- 每本书显示：封面(自动生成或默认)、标题、总体进度、"继续学习"按钮。
- **Import**: 支持拖拽文件夹导入新书。

### 2.2 幻灯片教学主控台 (Slide Learning Console)
布局：左树右幻灯片。

**左侧：知识树**
- 混合树结构 (目录 + 知识点)。
- **串联播放**：
    - 点击**知识点(叶子节点)**：加载该知识点的 Slide 组。
    - 点击**章节(父节点)**：加载该章节下所有知识点的 Slide 组，形成长列表。

**右侧：幻灯片演示区 (Slide Viewer)**
- **Header**: 当前播放的知识点标题，右侧可能显示 [🔈] 音频状态。
- **Card Area**: 居中显示的 HTML 内容卡片。
    - **Hover**: 鼠标悬停在特定文本上显示原文来源。
    - **Click**: 点击内部链接跳转其他知识点。
- **Navigation**:
    - 鼠标滚轮向下 -> 下一页。
    - 屏幕底部/两侧箭头 -> 翻页。
    - 键盘方向键 -> 翻页。

### 2.3 练习交互 (Embedded Quiz)
不再有独立的练习面板，习题作为一种特殊的 **Quiz Slide** 嵌入在播放流中。
- **展现**：翻页到 Quiz 卡片时，显示题目选项。
- **交互**：点击选项 -> 立即反馈 (正确/错误) + 解析。
- **完成**：答题完毕后，才能通过（或允许跳过）进入下一页。

### 2.4 错题本 (Mistake Review)
- 列表展示未解决的错题。
- 点击错题 -> 进入该题目对应的 **Quiz Slide** 模式（可能是单独的复习模式视图），重做题目。

## 3. 关键交互细节

- **Loading States**: 切换知识点时，如果正在生成 Slides，显示优雅的 Loading 骨架屏。
- **Audio Sync**:
    - 如果当前页有音频且开关开启，翻页后自动播放。
    - 再次翻页立即停止当前播放，开始下一段。
    - 仅当本地存在预生成的mp3文件时，播放按钮才可用。
- **Reference Tooltip**: 悬停查看原文引用时，Tooltip 应跟随鼠标或固定在行间，样式轻量，避免遮挡正文。
