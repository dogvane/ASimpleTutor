# 模块边界划分：ASimpleTutor vs LightRAG.NET

## 1. 定位差异

| 维度 | ASimpleTutor | LightRAG.NET |
|------|--------------|--------------|
| **定位** | 智能学习应用系统 | 底层 RAG SDK 库 |
| **目标用户** | 学习者 | 开发者 |
| **核心价值** | 知识点学习体验 | 通用文档检索与问答 |
| **知识粒度** | 学习概念（定义/要点/误区） | 实体（人/地/组织/概念） |

## 2. 功能边界划分

### 2.1 LightRAG.NET 职责（底层）

| 功能 | 说明 |
|------|------|
| 存储层 | KV存储、向量存储、图存储的抽象与实现 |
| 嵌入服务 | 文本向量化 |
| LLM服务 | 大模型调用封装 |
| 文档分块 | token 分块、语义分块 |
| 向量检索 | 相似度搜索 |
| 实体提取 | 通用实体识别（人名、地名、概念等） |

### 2.2 ASimpleTutor 职责（上层）

| 功能 | 说明 |
|------|------|
| 知识点提取 | 从文档中识别可学习概念 |
| 知识树构建 | 按章节→知识点层级组织 |
| 学习内容生成 | 精要速览、层次化展开 |
| 习题生成 | 选择/填空/简答题生成 |
| 练习反馈 | 答案评判与讲解 |
| 原文追溯 | chunk → 段落/行号的映射 |

## 3. 关键差异点

### 3.1 原文追溯需求

- **ASimpleTutor 要求**：`filePath` + `标题路径` + `段落/行号范围`
- **LightRAG 提供**：chunk 级别（1200 token），无法精确定位

**解决方案**：ASimpleTutor 自己维护 chunk → 原始文档的映射

### 3.2 知识粒度差异

| LightRAG 实体 | ASimpleTutor 知识点 |
|---------------|---------------------|
| "依赖注入" | "依赖注入模式 - 定义/优缺点/使用场景" |
| "IHost" | "IHost 接口 - 生命周期管理" |

**解决方案**：ASimpleTutor 基于 LightRAG 检索结果，用 LLM 二次加工

## 4. 接口边界

### 4.1 ASimpleTutor → LightRAG（单向依赖）

```
LightRAG 提供的接口（极简版）：
- InsertAsync(documentId, content, metadata)  // 插入并分块
- SearchAsync(query, topK)                     // 向量检索
- ClearAsync()                                 // 清空工作区
```

### 4.2 ASimpleTutor 特有接口

```
KnowledgeBuilder   // 知识体系构建
LearningGenerator  // 学习内容生成
ExerciseGenerator  // 习题生成
ExerciseFeedback   // 练习反馈
SourceTracker      // 原文追溯（自建）
```

## 5. 数据流

```
文档扫描
    ↓
LightRAG.Insert → chunks + 向量
    ↓
ASimpleTutor.SourceTracker → 建立 chunk→原文映射
    ↓
ASimpleTutor.LightRAG.Search → 相关 chunks
    ↓
ASimpleTutor.LLM → 提取知识点/生成学习内容
```

## 6. 相关文档

- [11-LightRAG集成设计.md](11-LightRAG集成设计.md)
- [12-简化集成设计.md](12-简化集成设计.md)
