# å¹»ç¯ç‰‡ API æ¥å£è§„èŒƒ

## æ ¸å¿ƒè®¾è®¡ç†å¿µ

**ç›´æ¥å¤ç”¨çŸ¥è¯†ç‚¹ç°æœ‰å†…å®¹**ï¼Œæ— éœ€è°ƒç”¨ LLM é‡æ–°ç”Ÿæˆã€‚

æ¯ä¸ªçŸ¥è¯†ç‚¹ï¼ˆKnowledgePointï¼‰åŒ…å«ï¼š
- `Summary` - ç²¾è¦é€Ÿè§ˆï¼ˆå®šä¹‰ã€å…³é”®ç‚¹ã€è¯¯åŒºï¼‰
- `Levels` - å±‚æ¬¡åŒ–å†…å®¹ï¼ˆL1/L2/L3ï¼‰
- `DocId` - å…³è”çš„æ–‡æ¡£ ID
- `ChapterPath` - ç« èŠ‚è·¯å¾„ï¼ˆç”¨äºå®šä½åŸæ–‡ç‰‡æ®µï¼‰
- `Relations` - çŸ¥è¯†ç‚¹å…³è”å…³ç³»

å¹»ç¯ç‰‡ï¼ˆSlidesï¼‰ç›´æ¥å°†ä¸Šè¿°å†…å®¹æŒ‰ç±»å‹ç»„ç»‡è¿”å›ç»™å‰ç«¯æ¸²æŸ“ã€‚

---

## 1. è·å–çŸ¥è¯†ç‚¹çš„ç²¾è¦é€Ÿè§ˆ

### è¯·æ±‚

**Endpoint**: `GET /api/v1/knowledge-points/overview`

**Query Parameters**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|-----|------|
| kpId | string | æ˜¯ | çŸ¥è¯†ç‚¹ ID |

**ç¤ºä¾‹è¯·æ±‚**:
```http
GET /api/v1/knowledge-points/overview?kpId=kp_001
```

### å“åº”

**æˆåŠŸå“åº”** (200 OK):

```json
{
  "id": "kp_001",
  "title": "ç¥ç»å…ƒæ¨¡å‹",
  "overview": {
    "definition": "ç¥ç»å…ƒæ˜¯ç¥ç»ç½‘ç»œçš„åŸºæœ¬å¤„ç†å•å…ƒï¼Œå®ƒæ¥æ”¶è¾“å…¥ä¿¡å·ï¼Œè¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œç„¶åé€šè¿‡æ¿€æ´»å‡½æ•°äº§ç”Ÿè¾“å‡ºã€‚",
    "keyPoints": [
      "æ¥æ”¶å¤šä¸ªè¾“å…¥ä¿¡å·",
      "åŠ æƒæ±‚å’Œä¸åç½®",
      "æ¿€æ´»å‡½æ•°éçº¿æ€§å˜æ¢"
    ],
    "pitfalls": [
      "ç¥ç»å…ƒä¸ç­‰äºå¤§è„‘ä¸­çš„ç¥ç»å…ƒ",
      "æƒé‡ä¸æ˜¯å›ºå®šå€¼ï¼Œéœ€è¦é€šè¿‡å­¦ä¹ è·å¾—"
    ]
  },
  "generatedAt": "2025-01-15T10:30:00Z"
}
```

---

## 2. è·å–çŸ¥è¯†ç‚¹çš„åŸæ–‡å¯¹ç…§

### è¯·æ±‚

**Endpoint**: `GET /api/v1/knowledge-points/source-content`

**Query Parameters**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|-----|------|
| kpId | string | æ˜¯ | çŸ¥è¯†ç‚¹ ID |

**ç¤ºä¾‹è¯·æ±‚**:
```http
GET /api/v1/knowledge-points/source-content?kpId=kp_001
```

### å“åº”

**æˆåŠŸå“åº”** (200 OK):

```json
{
  "id": "kp_001",
  "title": "ç¥ç»å…ƒæ¨¡å‹",
  "sourceItems": [
    {
      "filePath": "g:\\books\\neural-network.md",
      "fileName": "neural-network.md",
      "headingPath": ["ç¬¬2ç« ", "2.1èŠ‚"],
      "lineStart": 15,
      "lineEnd": 20,
      "content": "ç¥ç»å…ƒæ˜¯ç¥ç»ç½‘ç»œçš„åŸºæœ¬å¤„ç†å•å…ƒï¼Œå®ƒæ¥æ”¶è¾“å…¥ä¿¡å·ï¼Œè¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œç„¶åé€šè¿‡æ¿€æ´»å‡½æ•°äº§ç”Ÿè¾“å‡ºã€‚"
    }
  ]
}
```

---

## 3. è·å–çŸ¥è¯†ç‚¹çš„å±‚æ¬¡å±•å¼€å†…å®¹

### è¯·æ±‚

**Endpoint**: `GET /api/v1/knowledge-points/detailed-content`

**Query Parameters**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|-----|------|
| kpId | string | æ˜¯ | çŸ¥è¯†ç‚¹ ID |
| level | string | å¦ | å±‚æ¬¡ï¼ˆbrief/detailed/deepï¼‰ |

**ç¤ºä¾‹è¯·æ±‚**:
```http
GET /api/v1/knowledge-points/detailed-content?kpId=kp_001
```

### å“åº”

**æˆåŠŸå“åº”** (200 OK):

```json
{
  "id": "kp_001",
  "title": "ç¥ç»å…ƒæ¨¡å‹",
  "levels": {
    "brief": {
      "content": "ç¥ç»å…ƒçš„æ•°å­¦è¡¨è¾¾å¦‚ä¸‹ï¼šy = f(Î£ wáµ¢xáµ¢ + b)",
      "keyPoints": [
        "æ¥æ”¶å¤šä¸ªè¾“å…¥ä¿¡å·",
        "åŠ æƒæ±‚å’Œä¸åç½®",
        "æ¿€æ´»å‡½æ•°éçº¿æ€§å˜æ¢"
      ]
    },
    "detailed": {
      "content": "ç¥ç»å…ƒçš„è¾“å‡ºè®¡ç®—åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š1. åŠ æƒæ±‚å’Œ 2. åç½®å åŠ  3. éçº¿æ€§å˜æ¢",
      "examples": [
        "Sigmoid: Ïƒ(x) = 1/(1+eâ»Ë£)",
        "ReLU: max(0,x)"
      ]
    },
    "deep": {
      "content": "å¦‚æœæ²¡æœ‰æ¿€æ´»å‡½æ•°ï¼Œæ— è®ºç½‘ç»œæœ‰å¤šå°‘å±‚ï¼Œæœ€ç»ˆéƒ½å¯ä»¥ç®€åŒ–ä¸ºçº¿æ€§å˜æ¢ã€‚æ¿€æ´»å‡½æ•°å¼•å…¥çš„éçº¿æ€§æ˜¯ç¥ç»ç½‘ç»œèƒ½å¤Ÿå­¦ä¹ å¤æ‚æ¨¡å¼çš„å…³é”®ã€‚",
      "relatedPatterns": [
        "æ¢¯åº¦æ¶ˆå¤±é—®é¢˜",
        "æ¿€æ´»å‡½æ•°é€‰æ‹©ç­–ç•¥"
      ],
      "bestPractices": [
        "éšè—å±‚ä¼˜å…ˆä½¿ç”¨ ReLU",
        "è¾“å‡ºå±‚æ ¹æ®ä»»åŠ¡é€‰æ‹©æ¿€æ´»å‡½æ•°"
      ]
    }
  }
}
```

---

## 4. è·å–çŸ¥è¯†ç‚¹çš„å¹»ç¯ç‰‡å¡ç‰‡

### è¯·æ±‚

**Endpoint**: `GET /api/v1/knowledge-points/slide-cards`

**Query Parameters**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|-----|------|
| kpId | string | æ˜¯ | çŸ¥è¯†ç‚¹ ID |

**ç¤ºä¾‹è¯·æ±‚**:
```http
GET /api/v1/knowledge-points/slide-cards?kpId=kp_001
```

### å“åº”

**æˆåŠŸå“åº”** (200 OK):

```json
{
  "id": "kp_001",
  "title": "ç¥ç»å…ƒæ¨¡å‹",
  "slideCards": [
    {
      "slideId": "slide_001",
      "type": "cover",
      "order": 0,
      "title": "ç¥ç»å…ƒæ¨¡å‹",
      "htmlContent": "<h2>ç¥ç»å…ƒæ¨¡å‹</h2><p>ç¥ç»å…ƒæ˜¯ç¥ç»ç½‘ç»œçš„åŸºæœ¬å¤„ç†å•å…ƒ...</p>",
      "speechScript": "ç¥ç»å…ƒæ˜¯ç¥ç»ç½‘ç»œçš„åŸºæœ¬å¤„ç†å•å…ƒï¼Œå®ƒæ¥æ”¶è¾“å…¥ä¿¡å·ï¼Œè¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œç„¶åé€šè¿‡æ¿€æ´»å‡½æ•°äº§ç”Ÿè¾“å‡ºã€‚",
      "sourceReferences": [
        {
          "snippetId": "snippet_001",
          "filePath": "g:\\books\\neural-network.md",
          "headingPath": ["ç¬¬2ç« ", "2.1èŠ‚"],
          "startLine": 15,
          "endLine": 20,
          "content": "ç¥ç»å…ƒæ˜¯ç¥ç»ç½‘ç»œçš„åŸºæœ¬å¤„ç†å•å…ƒ..."
        }
      ],
      "config": {
        "allowSkip": true,
        "requireComplete": false
      }
    },
    {
      "slideId": "slide_002",
      "type": "explanation",
      "order": 1,
      "title": "L1 æ¦‚è§ˆ",
      "htmlContent": "<h2>L1 æ¦‚è§ˆ</h2><p>ç¥ç»å…ƒçš„æ•°å­¦è¡¨è¾¾å¦‚ä¸‹...</p>",
      "speechScript": "ç¥ç»å…ƒçš„æ•°å­¦è¡¨è¾¾å¦‚ä¸‹ï¼šy = f(Î£ wáµ¢xáµ¢ + b)",
      "sourceReferences": [],
      "config": {
        "allowSkip": true,
        "requireComplete": false
      }
    }
  ]
}
```

---

## 5. è·å–çŸ¥è¯†ç‚¹çš„å®Œæ•´å¹»ç¯ç‰‡å†…å®¹ï¼ˆæ—§æ¥å£ï¼Œå·²åºŸå¼ƒï¼‰

### è¯·æ±‚

**Endpoint**: `GET /api/v1/knowledge-points/slides`

**Query Parameters**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|-----|------|
| kpId | string | æ˜¯ | çŸ¥è¯†ç‚¹ ID |

**ç¤ºä¾‹è¯·æ±‚**:
```http
GET /api/v1/knowledge-points/slides?kpId=kp_001
```

### å“åº”

**æˆåŠŸå“åº”** (200 OK):

```json
{
  "schemaVersion": "1.0",
  "kpId": "kp_001",
  "title": "ç¥ç»å…ƒæ¨¡å‹",
  "kpType": "concept",
  "slides": [
    {
      "slideId": "kp_001_cover",
      "type": "cover",
      "order": 1,
      "title": "ç¥ç»å…ƒæ¨¡å‹",
      "subtitle": "concept",
      "content": "# æ¦‚è¿°\n\n*ç¬¬2ç«  > 2.1èŠ‚*\n\n## å®šä¹‰\n\nç¥ç»å…ƒæ˜¯ç¥ç»ç½‘ç»œçš„åŸºæœ¬å¤„ç†å•å…ƒï¼Œå®ƒæ¥æ”¶è¾“å…¥ä¿¡å·ï¼Œè¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œç„¶åé€šè¿‡æ¿€æ´»å‡½æ•°äº§ç”Ÿè¾“å‡ºã€‚\n\n## æ ¸å¿ƒè¦ç‚¹\n\n- æ¥æ”¶å¤šä¸ªè¾“å…¥ä¿¡å·\n- åŠ æƒæ±‚å’Œä¸åç½®\n- æ¿€æ´»å‡½æ•°éçº¿æ€§å˜æ¢\n\n## å¸¸è§è¯¯åŒº\n\n- âš ï¸ ç¥ç»å…ƒä¸ç­‰äºå¤§è„‘ä¸­çš„ç¥ç»å…ƒ\n- âš ï¸ æƒé‡ä¸æ˜¯å›ºå®šå€¼ï¼Œéœ€è¦é€šè¿‡å­¦ä¹ è·å¾—",
      "kpLinks": [
        {
          "text": "æ¿€æ´»å‡½æ•°",
          "targetKpId": "kp_002",
          "relationship": "related"
        }
      ],
      "config": {
        "allowSkip": true,
        "requireComplete": false,
        "estimatedTime": 45
      }
    },
    {
      "slideId": "kp_001_explanation",
      "type": "explanation",
      "order": 2,
      "title": "L1 æ¦‚è§ˆ",
      "content": "## L1 æ¦‚è§ˆ\n\nç¥ç»å…ƒçš„æ•°å­¦è¡¨è¾¾å¦‚ä¸‹ï¼š\n\n```\ny = f(Î£ wáµ¢xáµ¢ + b)\n```\n\nå…¶ä¸­ï¼š\n- xáµ¢ æ˜¯è¾“å…¥ä¿¡å·\n- wáµ¢ æ˜¯å¯¹åº”æƒé‡\n- b æ˜¯åç½®\n- f æ˜¯æ¿€æ´»å‡½æ•°\n- y æ˜¯è¾“å‡º",
      "kpLinks": [],
      "config": {
        "allowSkip": true,
        "requireComplete": false,
        "estimatedTime": 90
      }
    },
    {
      "slideId": "kp_001_detail",
      "type": "detail",
      "order": 3,
      "title": "L2 è¯¦ç»†",
      "content": "## L2 è¯¦ç»†\n\n### æ•°å­¦åŸç†\n\nç¥ç»å…ƒçš„è¾“å‡ºè®¡ç®—åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š\n\n1. **åŠ æƒæ±‚å’Œ**ï¼šå°†æ¯ä¸ªè¾“å…¥ä¹˜ä»¥å¯¹åº”æƒé‡åç›¸åŠ \n2. **åç½®å åŠ **ï¼šåŠ ä¸Šåç½®é¡¹è°ƒæ•´æ¿€æ´»é˜ˆå€¼\n3. **éçº¿æ€§å˜æ¢**ï¼šé€šè¿‡æ¿€æ´»å‡½æ•°å¼•å…¥éçº¿æ€§\n\n### å¸¸ç”¨æ¿€æ´»å‡½æ•°\n\n| å‡½æ•° | å…¬å¼ | ç‰¹ç‚¹ |\n|------|------|------|\n| Sigmoid | Ïƒ(x) = 1/(1+eâ»Ë£) | è¾“å‡º(0,1)ï¼Œé€‚åˆæ¦‚ç‡ |\n| ReLU | max(0,x) | è®¡ç®—ç®€å•ï¼Œç¼“è§£æ¢¯åº¦æ¶ˆå¤± |\n| Tanh | tanh(x) | è¾“å‡º(-1,1)ï¼Œé›¶ä¸­å¿ƒ |",
      "kpLinks": [],
      "config": {
        "allowSkip": true,
        "requireComplete": false,
        "estimatedTime": 120
      }
    },
    {
      "slideId": "kp_001_deepdive",
      "type": "deepDive",
      "order": 4,
      "title": "L3 æ·±å…¥",
      "content": "## L3 æ·±å…¥æ¢è®¨\n\n### ä¸ºä»€ä¹ˆéœ€è¦æ¿€æ´»å‡½æ•°ï¼Ÿ\n\nå¦‚æœæ²¡æœ‰æ¿€æ´»å‡½æ•°ï¼Œæ— è®ºç½‘ç»œæœ‰å¤šå°‘å±‚ï¼Œæœ€ç»ˆéƒ½å¯ä»¥ç®€åŒ–ä¸ºçº¿æ€§å˜æ¢ï¼š\n\n```\ny = Wâ‚ƒ(Wâ‚‚(Wâ‚x + bâ‚) + bâ‚‚) + bâ‚ƒ = W'x + b'\n```\n\næ¿€æ´»å‡½æ•°å¼•å…¥çš„éçº¿æ€§æ˜¯ç¥ç»ç½‘ç»œèƒ½å¤Ÿå­¦ä¹ å¤æ‚æ¨¡å¼çš„å…³é”®ã€‚\n\n### æ¢¯åº¦æ¶ˆå¤±é—®é¢˜\n\nSigmoid/Tanh å‡½æ•°åœ¨ä¸¤ç«¯å¯¼æ•°è¶‹è¿‘äº0ï¼Œå¯¼è‡´æ·±å±‚ç½‘ç»œéš¾ä»¥è®­ç»ƒã€‚ReLU é€šè¿‡æ­£åŒºé—´æ’å®šå¯¼æ•°ç¼“è§£äº†è¿™ä¸ªé—®é¢˜ã€‚",
      "kpLinks": [],
      "config": {
        "allowSkip": true,
        "requireComplete": false,
        "estimatedTime": 150
      }
    },
    {
      "slideId": "kp_001_source",
      "type": "source",
      "order": 5,
      "title": "åŸæ–‡å¯¹ç…§",
      "content": "## åŸæ–‡æ¥æº\n\n### ğŸ“„ neural-network.md\n\n**ä½ç½®**: ç¬¬2ç«  > 2.1èŠ‚ (è¡Œ 15-20)\n\n> ç¥ç»å…ƒæ˜¯ç¥ç»ç½‘ç»œçš„åŸºæœ¬å¤„ç†å•å…ƒï¼Œå®ƒæ¥æ”¶è¾“å…¥ä¿¡å·ï¼Œ\n> è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œç„¶åé€šè¿‡æ¿€æ´»å‡½æ•°äº§ç”Ÿè¾“å‡ºã€‚\n\n---\n\n### ğŸ“„ deep-learning-basics.md\n\n**ä½ç½®**: ç¬¬3ç«  > æ¿€æ´»å‡½æ•° (è¡Œ 45-52)\n\n> æ¿€æ´»å‡½æ•°å¼•å…¥éçº¿æ€§å˜æ¢ï¼Œæ˜¯ç¥ç»ç½‘ç»œèƒ½å¤Ÿå­¦ä¹ å¤æ‚\n> æ¨¡å¼çš„å…³é”®ã€‚å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°åŒ…æ‹¬ Sigmoidã€ReLUã€Tanh ç­‰ã€‚\n\n---",
      "kpLinks": [],
      "config": {
        "allowSkip": true,
        "requireComplete": false,
        "estimatedTime": 60
      }
    },
    {
      "slideId": "kp_001_relations",
      "type": "relations",
      "order": 6,
      "title": "çŸ¥è¯†å…³è”",
      "content": "## çŸ¥è¯†å…³è”\n\n### ğŸ”¸ å‰ç½®çŸ¥è¯†\n\n- [[kp_000]]\n  - çº¿æ€§ä»£æ•°åŸºç¡€\n\n### ğŸ”— ç›¸å…³çŸ¥è¯†\n\n- [[kp_002]]\n  - æ¿€æ´»å‡½æ•°è¯¦è§£\n- [[kp_003]]\n  - æ„ŸçŸ¥æœºæ¨¡å‹\n\n### âš–ï¸ å¯¹æ¯”å­¦ä¹ \n\n- [[kp_004]]\n  - SVM ä¸ç¥ç»ç½‘ç»œå¯¹æ¯”",
      "kpLinks": [
        {
          "text": "kp_002",
          "targetKpId": "kp_002",
          "relationship": "related"
        },
        {
          "text": "kp_003",
          "targetKpId": "kp_003",
          "relationship": "related"
        },
        {
          "text": "kp_004",
          "targetKpId": "kp_004",
          "relationship": "contrast"
        }
      ],
      "config": {
        "allowSkip": true,
        "requireComplete": false,
        "estimatedTime": 45
      }
    }
  ],
  "meta": {
    "totalSlides": 6,
    "estimatedTime": 510,
    "difficulty": "intermediate",
    "generatedAt": "2025-01-15T10:30:00Z"
  }
}
```

---

## æ•°æ®ç»“æ„è¯´æ˜

### SlideType æšä¸¾

| ç±»å‹å€¼ | è¯´æ˜ | å†…å®¹æ¥æº |
|--------|------|----------|
| `cover` | å°é¢/å¯¼è¨€ | `Summary` (Definition, KeyPoints, Pitfalls) |
| `explanation` | æ¦‚å¿µè§£é‡Š | `Levels[0]` (L1) |
| `detail` | è¯¦ç»†å†…å®¹ | `Levels[1]` (L2) |
| `deepDive` | æ·±å…¥æ¢è®¨ | `Levels[2]` (L3) |
| `source` | åŸæ–‡å¯¹ç…§ | `DocId + ChapterPath â†’ Document.Sections` |
| `quiz` | éšå ‚æµ‹éªŒ | `Exercises` (å¦‚æœ‰) |
| `relations` | çŸ¥è¯†å…³è” | `Relations` |
| `summary` | æ€»ç»“å›é¡¾ | å¯é€‰ |

### å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `slideId` | string | å¹»ç¯ç‰‡å”¯ä¸€æ ‡è¯†ï¼Œæ ¼å¼ `{kpId}_{type}` |
| `type` | SlideTypeDto | å¹»ç¯ç‰‡ç±»å‹ |
| `order` | number | æ’åºåºå·ï¼ˆä»1å¼€å§‹ï¼‰ |
| `title` | string | å¹»ç¯ç‰‡æ ‡é¢˜ |
| `subtitle` | string? | å¯é€‰çš„å‰¯æ ‡é¢˜ |
| `content` | string | Markdown æ ¼å¼çš„å†…å®¹ï¼Œå‰ç«¯æ ¹æ® type æ¸²æŸ“ |
| `kpLinks` | array | çŸ¥è¯†ç‚¹é“¾æ¥åˆ—è¡¨ |
| `config.allowSkip` | boolean | æ˜¯å¦å…è®¸è·³è¿‡ |
| `config.requireComplete` | boolean | æ˜¯å¦å¿…é¡»å®Œæˆæ‰èƒ½ç»§ç»­ |
| `config.estimatedTime` | number | é¢„è®¡é˜…è¯»æ—¶é•¿ï¼ˆç§’ï¼‰ |

---

## å¹»ç¯ç‰‡å†…å®¹æ¸²æŸ“æŒ‡å—ï¼ˆå‰ç«¯ï¼‰

### Cover ç±»å‹

**æ¸²æŸ“å»ºè®®**ï¼š
- æ ‡é¢˜ä½¿ç”¨å¤§å·å±…ä¸­æ˜¾ç¤º
- å‰¯æ ‡é¢˜ï¼ˆsubtitleï¼‰æ˜¾ç¤ºçŸ¥è¯†ç‚¹ç±»å‹
- å®šä¹‰éƒ¨åˆ†ä½¿ç”¨å¼•ç”¨å—æ ·å¼
- å…³é”®ç‚¹ä½¿ç”¨åˆ—è¡¨ï¼Œæ¯é¡¹ä¸€ä¸ªå›¾æ ‡
- è¯¯åŒºä½¿ç”¨è­¦å‘Šå›¾æ ‡

```markdown
# æ¦‚è¿°

*ç¬¬2ç«  > 2.1èŠ‚*

## å®šä¹‰
ç¥ç»å…ƒæ˜¯ç¥ç»ç½‘ç»œçš„åŸºæœ¬å¤„ç†å•å…ƒ...

## æ ¸å¿ƒè¦ç‚¹
- æ¥æ”¶å¤šä¸ªè¾“å…¥ä¿¡å·
- åŠ æƒæ±‚å’Œä¸åç½®
- æ¿€æ´»å‡½æ•°éçº¿æ€§å˜æ¢

## å¸¸è§è¯¯åŒº
- âš ï¸ ç¥ç»å…ƒä¸ç­‰äºå¤§è„‘ä¸­çš„ç¥ç»å…ƒ
```

### Explanation / Detail / DeepDive ç±»å‹

**æ¸²æŸ“å»ºè®®**ï¼š
- ä½¿ç”¨æ ‡å‡† Markdown æ¸²æŸ“
- ä»£ç å—ä½¿ç”¨è¯­æ³•é«˜äº®
- è¡¨æ ¼ä½¿ç”¨è¡¨æ ¼æ ·å¼
- å…¬å¼å¯ä½¿ç”¨ KaTeX/MathJax æ¸²æŸ“

```markdown
## L2 è¯¦ç»†

### æ•°å­¦åŸç†

ç¥ç»å…ƒçš„è¾“å‡ºè®¡ç®—åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š

1. **åŠ æƒæ±‚å’Œ**ï¼šå°†æ¯ä¸ªè¾“å…¥ä¹˜ä»¥å¯¹åº”æƒé‡åç›¸åŠ 
2. **åç½®å åŠ **ï¼šåŠ ä¸Šåç½®é¡¹è°ƒæ•´æ¿€æ´»é˜ˆå€¼
3. **éçº¿æ€§å˜æ¢**ï¼šé€šè¿‡æ¿€æ´»å‡½æ•°å¼•å…¥éçº¿æ€§

### å¸¸ç”¨æ¿€æ´»å‡½æ•°

| å‡½æ•° | å…¬å¼ | ç‰¹ç‚¹ |
|------|------|------|
| Sigmoid | Ïƒ(x) = 1/(1+eâ»Ë£) | è¾“å‡º(0,1)ï¼Œé€‚åˆæ¦‚ç‡ |
```

### Source ç±»å‹

**æ¸²æŸ“å»ºè®®**ï¼š
- æ¯ä¸ªåŸæ–‡ç‰‡æ®µä½¿ç”¨å¡ç‰‡æ ·å¼
- æ–‡ä»¶åä½œä¸ºå¡ç‰‡æ ‡é¢˜
- ä½ç½®ä¿¡æ¯ä½¿ç”¨å°å·ç°è‰²æ–‡å­—
- åŸæ–‡å†…å®¹ä½¿ç”¨å¼•ç”¨å—æ ·å¼
- æ”¯æŒç‚¹å‡»è·³è½¬åˆ°åŸæ–‡ï¼ˆå¦‚æœæœ‰è¡Œå·ä¿¡æ¯ï¼‰

```markdown
## åŸæ–‡æ¥æº

### ğŸ“„ neural-network.md

**ä½ç½®**: ç¬¬2ç«  > 2.1èŠ‚ (è¡Œ 15-20)

> ç¥ç»å…ƒæ˜¯ç¥ç»ç½‘ç»œçš„åŸºæœ¬å¤„ç†å•å…ƒï¼Œå®ƒæ¥æ”¶è¾“å…¥ä¿¡å·ï¼Œ
> è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œç„¶åé€šè¿‡æ¿€æ´»å‡½æ•°äº§ç”Ÿè¾“å‡ºã€‚

---
```

### Relations ç±»å‹

**æ¸²æŸ“å»ºè®®**ï¼š
- æŒ‰å…³ç³»ç±»å‹åˆ†ç»„æ˜¾ç¤ºï¼ˆå‰ç½®ã€ç›¸å…³ã€å¯¹æ¯”ã€ç›¸ä¼¼ï¼‰
- çŸ¥è¯†ç‚¹ ID ä½¿ç”¨é“¾æ¥æ ·å¼
- ç‚¹å‡»é“¾æ¥è·³è½¬åˆ°å¯¹åº”çŸ¥è¯†ç‚¹
- æè¿°ä¿¡æ¯ä½¿ç”¨å°å·å­—ä½“

```markdown
## çŸ¥è¯†å…³è”

### ğŸ”¸ å‰ç½®çŸ¥è¯†

- [[kp_000]]
  - çº¿æ€§ä»£æ•°åŸºç¡€

### ğŸ”— ç›¸å…³çŸ¥è¯†

- [[kp_002]]
  - æ¿€æ´»å‡½æ•°è¯¦è§£
```

---

## çŸ¥è¯†ç‚¹è·³è½¬

### kpLinks å­—æ®µæ ¼å¼

```json
{
  "text": "æ¿€æ´»å‡½æ•°",
  "targetKpId": "kp_002",
  "relationship": "related",
  "targetTitle": "æ¿€æ´»å‡½æ•°è¯¦è§£"
}
```

### å‰ç«¯å¤„ç†å»ºè®®

1. **æ¸²æŸ“æ—¶**ï¼šè¯†åˆ« `content` ä¸­çš„ `[[kpId]]` æ ¼å¼ï¼Œæ›¿æ¢ä¸ºå¯ç‚¹å‡»é“¾æ¥
2. **ç‚¹å‡»æ—¶**ï¼š
   - ä¿å­˜å½“å‰æµè§ˆä½ç½®åˆ°å†å²æ ˆ
   - è°ƒç”¨ `/slides?kpId=kp_002` è·å–ç›®æ ‡çŸ¥è¯†ç‚¹å¹»ç¯ç‰‡
   - æ›¿æ¢å½“å‰æ˜¾ç¤ºå†…å®¹

```typescript
// æ¸²æŸ“çŸ¥è¯†ç‚¹é“¾æ¥
function renderContentWithLinks(content: string, kpLinks: KpLink[]): string {
  let html = content;
  kpLinks.forEach(link => {
    const pattern = new RegExp(`\\[\\[${link.targetKpId}\\]\\]`, 'g');
    html = html.replace(pattern, `<a href="#" class="kp-link" data-kp-id="${link.targetKpId}">${link.targetTitle || link.targetKpId}</a>`);
  });
  return html;
}

// å¤„ç†ç‚¹å‡»
function handleKpLinkClick(kpId: string) {
  // ä¿å­˜å½“å‰çŠ¶æ€
  pushHistory({ kpId: currentKpId, slideIndex: currentSlideIndex });
  // åŠ è½½æ–°çŸ¥è¯†ç‚¹
  loadSlides(kpId);
}
```

---

## é”™è¯¯å“åº”

| HTTP Code | Error Code | è¯´æ˜ |
|----------|-----------|------|
| 400 | BAD_REQUEST | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 404 | KP_NOT_FOUND | çŸ¥è¯†ç‚¹ä¸å­˜åœ¨ |
| 500 | INTERNAL_ERROR | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

```json
{
  "error": {
    "code": "KP_NOT_FOUND",
    "message": "çŸ¥è¯†ç‚¹ä¸å­˜åœ¨: kp_001"
  }
}
```

---

## æ³¨æ„äº‹é¡¹

1. **å†…å®¹ä¸º Markdown æ ¼å¼**ï¼šå‰ç«¯éœ€è¦ä½¿ç”¨ Markdown æ¸²æŸ“å™¨
2. **å¹»ç¯ç‰‡æ•°é‡ä¸å›ºå®š**ï¼šæ ¹æ®çŸ¥è¯†ç‚¹å®é™…å†…å®¹ç”Ÿæˆï¼Œå¯èƒ½æœ‰ 3-7 å¼ 
3. **çŸ¥è¯†ç‚¹é“¾æ¥éœ€è¦å‰ç«¯å¤„ç†**ï¼š`[[kpId]]` æ ¼å¼éœ€è¦æ›¿æ¢ä¸ºå¯ç‚¹å‡»é“¾æ¥
4. **æ—¶é—´ä¼°ç®—**ï¼š`estimatedTime` å¯ç”¨äºæ˜¾ç¤ºè¿›åº¦æ¡æˆ–é˜…è¯»æ—¶é—´æç¤º
5. **éš¾åº¦ç­‰çº§**ï¼šæ ¹æ® `Importance` å­—æ®µè®¡ç®—ï¼Œå¯ç”¨äºä¸ªæ€§åŒ–æ¨è

---

## ä¸æ—§æ¥å£çš„å…¼å®¹æ€§

| æ—§æ¥å£ | æ–°æ¥å£ | è¯´æ˜ |
|--------|--------|------|
| `/overview` | `/slides` (type=cover) | æ–°æ¥å£çš„ cover slide åŒ…å« overview å†…å®¹ |
| `/detailed-content` | `/slides` (type=explanation/detail/deepdive) | æ–°æ¥å£åˆ†ä¸‰å¼ å¹»ç¯ç‰‡å±•ç¤º |
| `/source-content` | `/slides` (type=source) | æ–°æ¥å£çš„ source slide |

æ—§æ¥å£ä»ç„¶å¯ç”¨ï¼Œä½†å»ºè®®é€æ­¥è¿ç§»åˆ°æ–°æ¥å£ã€‚
