# 界面与交互流程（MVP）

## 1. 页面/区域划分（建议）

- 顶部：书籍目录选择（下拉/切换）+ 当前路径展示 + 重新扫描按钮 + 搜索框
- 左侧：知识点列表（章节树/重要性排序切换）
- 右侧：学习与练习面板（Tabs 或折叠区）

## 2. 核心用户流程

### 2.0 系统入口：选择书籍目录（Book Root）

1. 应用启动后从配置读取 `BookRoot[]`
2. 若仅有 1 个可用项：自动设为当前激活并进入扫描
3. 若有多个可用项：默认选中上次使用的 `active_book_root_id`（或第一个），用户可下拉切换

切换 Book Root 行为：

- 立即触发重新扫描/重建知识体系（或提示确认后执行）
- UI 清空旧知识点与学习内容，进入 loading 状态

### 2.1 启动与扫描

1. 应用启动
2. 自动扫描目录并构建知识体系
3. UI 展示知识点列表

异常：扫描失败时提示错误并允许重试/选择目录。

### 2.2 选择知识点学习

1. 用户点击某 KP
2. 展示：
   - 精要速览（默认）
   - 原文对照（可切换）
   - 层次化展开（按钮逐层展开）
3. 可选：关联拓展列表

### 2.3 练习与反馈（可选）

1. 用户点击“生成练习”
2. 展示 1~3 题
3. 用户提交答案
4. 展示反馈：正确性 + 讲解 + 参考答案/要点

## 3. 交互细节（MVP 关键）

- “原文对照”必须包含出处（文件名/章节路径）
- 生成类操作（学习内容/练习）需要 loading 状态与可取消（可选）
- 对 Agent 的不确定输出，UI 用“可能/推测”提示，并允许回到原文

## 4. 可访问性与可用性

- 支持键盘搜索与上下移动选择
- 文本区域支持复制

## 5. 相关文档

- [00-总体设计.md](00-总体设计.md)
- [02-知识点浏览与搜索.md](02-知识点浏览与搜索.md)
- [03-学习内容生成（精要速览-原文对照-层次化展开）.md](03-学习内容生成（精要速览-原文对照-层次化展开）.md)
- [04-习题生成与练习反馈.md](04-习题生成与练习反馈.md)

