# Research-Learning 模块功能需求文档

## 1. 项目目标

基于书籍文档的智能学习系统，输入为指定目录中的一组 .md 文档。
系统利用 Agent 对文档进行扫描，建立知识体系，提取知识点，并为选定知识点生成学习内容与练习题。
通过 RAG、知识图谱、Agent 自适应学习等技术，提供从“知识获取”到“练习巩固”再到“查漏补缺”的完整学习闭环。

### 核心范围说明

- **多书籍/项目管理**：支持可以配置多个数据源，并在不同书籍间切换。
- **完整学习闭环**：
  - **学习进度追踪**：记录每个知识点的学习状态（未开始/学习中/已掌握）。
  - **错题本**：自动收录练习中的错题，支持针对性复习。
  - **学习报告**：生成章节或全书的学习进度与掌握度报告。
  - **章节回顾与考核**：提供章节级别的综合测试。

## 2. 核心功能需求

### 2.1 知识体系扫描与建立

- **输入处理**：程序启动时扫描指定书籍目录（Book Hub）中的 .md 文档，支持增量更新。
- **知识点提取粒度（混合模式）**：
  - **结构级**：识别文档的标题层级（目录树）。
  - **概念级**：提取正文中隐藏的核心术语、定义或实体。
- **体系构建**：
  - 基于 Agent 分析文档内容，建立书籍的知识体系和知识点树。
  - 完成知识点构建后，自动基于这些知识点完成知识图谱的构建。
  - 提取知识点间的层次关系（父子）和关联性（前置、相关、对比、依赖、包含等）。
- **知识图谱构建**：
  - 将知识点转换为知识图谱节点，保留其类型、重要性、章节路径等属性。
  - 自动计算节点间的关系权重，构建语义关联网络。
  - 支持可视化布局计算，为知识图谱提供基础的可视化支持。
- **参考资料索引**：对书籍目录下的“参考资料”子目录建立独立的 RAG 索引，用于深度探索。

### 2.2 知识点展示与选择

- **界面布局（左右分栏）**：
  - **左侧导航**：知识体系目录树（混合结构），支持搜索过滤。
  - **右侧主区**：交互式幻灯片演示区（HTML Based PPT），支持鼠标滑动翻页。
- **展示结构**：
  - 以书籍原有目录结构为主干，挂载概念级知识点。
  - 区分“已掌握”、“学习中”等状态标记。

### 2.3 幻灯片教学模式 (Slide-based Learning)

用户选择某个知识点或章节后，系统在后台生成 HTML 格式的**卡片组**（类似 PPT 概念），在右侧区域进行演示。这是一种流式的、专注于内容的阅读体验，而非传统演示文稿。

- **教案形态**：
  - **单点模式**：选中单个知识点时，生成一组 Slides（精要定义 -> 详解架构 -> 示例分析 -> 总结）。
  - **串联模式**：选中父级节点（如章节）时，自动串联该章节下核心知识点的 Slides，形成连贯的线性教案。
- **内容增强**：
  - 在生成 slide card 时，除了原始知识点和知识点对应原文外，还需补充知识图谱的关联信息。
  - 自动识别当前知识点在知识图谱中的邻居节点和关联关系，并在教学内容中展示。
  - 提供知识点间的语义关联分析，帮助用户理解知识点在整个知识体系中的位置。
- **交互方式**：
  - **滑动翻页**：支持鼠标滚轮或点击进行上下/左右翻页，体验类似 Web PPT。
  - **原文悬停 (Hover-over Source)**：在讲义的关键内容处，鼠标**悬停**即可浮层显示对应的原文片段，无需跳转或弹窗，保持阅读连贯性。
  - **知识跳跃 (Hyperlink Jumping)**：内容中提及其他知识点时，提供可点击链接，点击后直接跳转到该知识点对应的教学 Slide 视图。
  - **知识图谱关联展示**：在幻灯片中展示当前知识点的关联节点，支持点击跳转到关联知识点。
- **内容分层（通过 PPT 页数控制）**：
  - **基础页**：核心概念与定义（对应原 L1）。
  - **扩展页**：原理、机制、示例（对应原 L2）。
  - **深度页**：边界条件与对比（对应原 L3，用户可选择跳过）。
  - **关联页**：知识图谱关联分析（新增）。

### 2.4 习题生成与练习

- **嵌入式测验**：
  - 习题作为特殊的 **交互式 Slide** 穿插在教案 PPT 中（例如每学完一个核心概念，紧跟一页随堂测验）。
  - **按需生成**：针对特定知识点即时生成。
  - **综合组卷**：针对章节或错题集生成综合测试卷。
- **习题内容**：基于当前知识点内容、原文上下文及关联知识点生成。
- **习题类型**：选择题、填空题、简答题、代码补全/改错题（针对技术书籍）。
- **自适应难度**：根据用户历史答题表现调整题目难度。

### 2.5 练习反馈与评估

- **智能判题**：
  - 选择题自动判定。
  - 开放性题目由 Agent 进行语义分析，给出评分、改进建议及参考答案。
- **错题管理**：
  - 错题自动加入“错题本”。
  - 分析错误原因（如：概念模糊、细节遗漏）。
- **进度沉淀**：更新用户的知识点掌握度（Mastery Level）。

### 2.6 数据模型与存储

- **存储方案**：
  - **关系型/文档数据**：SQLite（存储知识图谱、用户进度、错题记录）。
  - **向量数据**：嵌入式向量数据库（或 SQLite 向量扩展），用于 RAG 检索。
- **架构设计**：采用 Repository 模式隔离存储实现，支持未来扩展至服务器端数据库。

### 2.7 知识图谱功能

知识图谱是系统的核心功能之一，为用户提供知识点间的语义关联分析和可视化展示。

- **知识图谱构建**：
  - 在扫描阶段，完成知识点构建后，自动基于知识点间的语义关系构建知识图谱。
  - 支持多种节点类型（概念、章节、流程、API、最佳实践等）和关系类型（包含、依赖、相关、对比等）。
  - 自动计算节点重要性和边权重，为知识图谱的可视化和查询提供基础。

- **知识图谱可视化**：
  - 提供交互式的知识图谱可视化界面，支持缩放、平移和节点选择。
  - 节点颜色和大小根据类型和重要性动态调整，边的粗细根据权重变化。
  - 支持搜索和过滤功能，帮助用户快速定位感兴趣的知识点。

- **知识图谱查询**：
  - 支持节点搜索和邻居查询，帮助用户发现知识点间的关联。
  - 提供子图获取功能，允许用户查看以特定知识点为中心的局部知识图谱。
  - 支持相似度计算，帮助用户找到相关度高的知识点。

- **知识图谱在教学中的应用**：
  - 在生成教学内容时，自动补充当前知识点的知识图谱关联信息。
  - 帮助用户理解知识点在整个知识体系中的位置和作用。
  - 提供知识点间的语义关联分析，增强学习效果。

### 2.8 Agent 编排与技术栈

- **编排框架**：**Semantic Kernel** 全面接管 Agent 编排。
- **实现模式**：
  - **Multi-Agent 协作**：Manager 规划学习路径，Tutor 讲解，Examiner 出题，Reviewer 点评。
  - **Plugins/Skills**：
    - `KnowledgeGraphPlugin`（构建与查询）
    - `ContentGenerationPlugin`（分层内容）
    - `AssessmentPlugin`（出题与判卷）
    - `RetrievalPlugin`（RAG）
  - **Planner**：利用 Planner 实现复杂的任务规划（如“制定第3章复习计划”）。

知识图谱是系统的核心功能之一，为用户提供知识点间的语义关联分析和可视化展示。

- **知识图谱构建**：
  - 在扫描阶段，完成知识点构建后，自动基于知识点间的语义关系构建知识图谱。
  - 支持多种节点类型（概念、章节、流程、API、最佳实践等）和关系类型（包含、依赖、相关、对比等）。
  - 自动计算节点重要性和边权重，为知识图谱的可视化和查询提供基础。

- **知识图谱可视化**：
  - 提供交互式的知识图谱可视化界面，支持缩放、平移和节点选择。
  - 节点颜色和大小根据类型和重要性动态调整，边的粗细根据权重变化。
  - 支持搜索和过滤功能，帮助用户快速定位感兴趣的知识点。

- **知识图谱查询**：
  - 支持节点搜索和邻居查询，帮助用户发现知识点间的关联。
  - 提供子图获取功能，允许用户查看以特定知识点为中心的局部知识图谱。
  - 支持相似度计算，帮助用户找到相关度高的知识点。

- **知识图谱在教学中的应用**：
  - 在生成教学内容时，自动补充当前知识点的知识图谱关联信息。
  - 帮助用户理解知识点在整个知识体系中的位置和作用。
  - 提供知识点间的语义关联分析，增强学习效果。

## 3. 非功能需求

- **性能**：
  - 大文件/多文件扫描需支持后台异步处理，前台展示进度。
  - 向量检索需保证毫秒级响应。
- **可配置性**：支持自定义 Prompt 模板，支持切换不同 LLM 模型（OpenAI, Azure, Local LLM）。
- **鲁棒性**：异常处理机制完善，Agent 生成失败时有明确降级策略（如回退到仅展示原文）。
- **隐私**：默认本地运行，保护用户学习数据。

---

**目标**：创建一个功能完备的智能书籍学习系统，通过 Agent 与 RAG 技术实现深度学习、知识内化与能力评估。
